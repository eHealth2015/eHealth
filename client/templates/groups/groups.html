<template name="groups">
	<h1>{{strings.header}}</h1>
	<h4>{{strings.people}}</h4>

	{{#if people}}
	<table class="ui striped table">
		<thead>
			<tr>
				<th>First Name</th>
				<th>Last Name</th>
				{{#if isUserMedic}}
				<th>Last data</th>
				{{/if}}
				<th>Actions</th>
			</tr>
		</thead>
		<tbody>
			{{#each people}}
			<tr>
				<td>{{firstName}}</td>
				<td>{{lastName}}</td>
				{{#if isUserMedic}}
					<td>Last data</td>
					<!-- other fields... -->
				{{/if}}
				<td>Toto</td>
			</tr>
			{{/each}}
		</tbody>
	</table>
	{{else}}
		<div class="italic">
			<i class="warning circle icon"></i>
			<span>You don't have any {{strings.peopleType}}.</span>
		</div>
	{{/if}}

	<div class="huge-spacing"></div>

	<div class="ui grid">
		<div class="eleven wide column">
			<h4>{{strings.groups}}</h4>
		</div>
		<div class="five wide column right">
			{{#if isUserMedic}}
			<div class="ui labeled icon buttons">
				<button id="add" class="ui tealbis button">
					<i class="plus icon"></i>
					Add
				</button>
			</div>
			{{/if}}
		</div>
	</div>

	<div class="adding-group" style="display:none;">
		<div class="big-spacing"></div>
		<form class="ui form">
			<div class="field">
				<input type="text" name="group-name" placeholder="Group name" id="groupName">
			</div>
			<div class="ui buttons">
				<button class="ui positive button">Add</button>
				<div class="or"></div>
				<button class="ui button" id="cancel-add">Cancel</button>
			</div>
		</form>
		<div class="big-spacing"></div>
	</div>

	{{#if groups}}
	<table class="ui striped table">
		<thead>
		<tr>
			<th>Name</th>
			{{#if isUserMedic}}
			<th>Members</th>
			<th>Patients</th>
			{{/if}}
			<th>Actions</th>
		</tr>
		</thead>
		<tbody>
		{{#each groups}}
			<tr>
				<td>{{name}}</td>
				{{#if isUserMedic}}
				<td>{{medics.length}}</td>
				<td>{{patients.length}}</td>
				{{/if}}
				<td>
					<a href="#{{_id}}" id="showDetails" class="ui tiny yellow basic icon button">
						<i class="info icon"></i>
						Details
					</a>
				</td>
			</tr>
		{{/each}}
		</tbody>
	</table>
	{{else}}
		<div class="big-spacing"></div>
		<div class="italic">
			<i class="warning circle icon"></i>
			<span>You don't have any group.</span>
		</div>
	{{/if}}

	<div class="huge-spacing"></div>

	<!-- REMARQUES
	remarques:<br>
	(accès pour plus d'info sur le patient ? accordéon ?)<br>
	(todo: remove patient with confirmation)<br>
	(todo: confimation avant suppr groupe)<br>
	(todo: harmoniser les tableaux)<br>
	(todo: espacer la fleche du bas et la croix ?)
	-->

	{{> groupDetails group}}

</template>

<template name="groupDetails">
	<div id="groupDetailsModal" class="ui modal">
		<i class="close icon"></i>
		<div class="header">
			{{name}}
		</div>
		<div class="content">
			{{#if isUserMedic}}
			<div class="ui grid">
				<div class="seven wide column">
					<h4>Patients</h4>
				</div>
				<div class="three wide column ui input">
					<input id="addPatientFirstName" placeholder="First name" name="newPatientFirstName" type="text">
				</div>
				<div class="three wide column ui input">
					<input id="addPatientLastName" placeholder="Last name" name="newPatientLastName" type="text">
				</div>
				<div class="three wide column">
					<div class="ui labeled icon buttons">
						<button id="addPatient" class="ui tealbis button">
							<i class="plus icon"></i>
							Add
						</button>
					</div>
				</div>
			</div>
			<div class="big-spacing"></div>
			{{#if patients}}
			<table class="ui striped table">
				<thead>
					<tr>
						<th>First name</th>
						<th>last name</th>
						<th>Gender</th>
						<th>Actions</th>
					</tr>
				</thead>
				<tbody>
					{{#each patients}}
					<tr>
						<td>{{firstName}}</td>
						<td>{{lastName}}</td>
						<td>{{gender}}</td>
						<td>
							<button href="#{{_id}}" id="showDetail" class="ui tiny yellow basic icon button">
								<i class="mail outline icon"></i>
								Message
							</button>
							{{#if ../admin}}
							<button class="ui tiny red basic icon button" id="deletePatient" patientId="{{_id}}">
								<i class="remove icon"></i>
								Remove
							</button>
							{{/if}}
						</td>
					</tr>
					{{/each}}
				</tbody>
			</table>
			{{else}}
				<div class="italic">
					<i class="warning circle icon"></i>
					<span>There is no patient.</span>
				</div>
			{{/if}}
			<div class="big-spacing"></div>
			{{/if}}
			<div class="ui grid">
				<div class="seven wide column">
					<h4>Medical staff</h4>
				</div>
				<div class="three wide column ui input">
					<input id="addMedicFirstName" placeholder="First name" name="newMedicFirstName" type="text">
				</div>
				<div class="three wide column ui input">
					<input id="addMedicLastName" placeholder="Last name" name="newMedicLastName" type="text">
				</div>
				<div class="three wide column">
					<div class="ui labeled icon buttons">
						<button id="addMedic" class="ui tealbis button">
							<i class="plus icon"></i>
							Add
						</button>
					</div>
				</div>
			</div>
			<div class="big-spacing"></div>
			<table class="ui striped table">
				<thead>
					<tr>
						<th>Title</th>
						<th>First name</th>
						<th>last name</th>
						<th>Actions</th>
					</tr>
				</thead>
				<tbody>
					{{#each medics}}
					<tr>
						<td>{{title}}</td>
						<td>{{firstName}}</td>
						<td>{{lastName}}</td>
						<td>
							<a href="#{{_id}}" id="showDetails" class="ui tiny yellow basic icon button">
								<i class="info icon"></i>
								TBD
							</a>

							<button class="ui tiny red basic icon button" id="deleteGroup" groupId="{{_id}}">
								<i class="remove icon"></i>
								TBD
							</button>
						</td>
					</tr>
					{{/each}}
				</tbody>
			</table>
			{{#if admin}}
			<div class="big-spacing"></div>
			<div class="ui grid">
				<div class="three wide column ui input">
					<input id="newName" value="{{name}}" name="newName" type="text">
				</div>
				<div class="four wide column">
					<button id="changeName" class="ui button">Change name</button>
				</div>
				<div class="five wide column"></div>
				<div class="four wide column">
					<button id="deleteGroup1" class="ui button red">Delete the group</button>
					<button id="deleteGroup2" class="ui button red" style="display: none;">Click again to delete</button>
				</div>
			</div>
			{{/if}}
		</div>
	</div>
</template>